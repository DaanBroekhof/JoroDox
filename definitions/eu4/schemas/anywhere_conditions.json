{
  "$schema": "http://json-schema.org/schema#",
  "$id": "http://jorodox.org/schemas/anywhere_conditions.json",
  "type": "object",
  "definitions": {
    "anywhere_conditions": {
      "$mergeProps": [
        {
          "$ref": "anywhere_conditions.json#/definitions/anywhere_conditions_dual_scopes"
        },
        {
          "$ref": "anywhere_conditions.json#/definitions/anywhere_conditions_identifier_dual_scopes"
        },
        {
          "$ref": "anywhere_conditions.json#/definitions/anywhere_conditions_properties"
        },
        {
          "$ref": "anywhere_conditions.json#/definitions/anywhere_conditions_variables"
        }
      ]
    },
    "anywhere_conditions_dual_scopes": {
      "$mergeProps": [
        {
          "properties": {
            "emperor": {
              "$ref": "country_conditions.json#/definitions/country_conditions"
            },
            "revolution_target": {
              "$ref": "country_conditions.json#/definitions/country_conditions"
            },
            "crusade_target": {
              "$ref": "country_conditions.json#/definitions/country_conditions"
            },

            "all_country": {
              "todo": "Update wiki?",
              "$ref": "country_conditions.json#/definitions/country_conditions"
            },
            "all_elector": {
              "todo": "Update wiki?",
              "$ref": "country_conditions.json#/definitions/country_conditions"
            },
            "all_province": {
              "$ref": "province_conditions.json#/definitions/province_conditions"
            },
            "any_country": {
              "$ref": "country_conditions.json#/definitions/country_conditions"
            },
            "any_elector": {
              "$ref": "country_conditions.json#/definitions/country_conditions"
            },
            "any_province": {
              "$ref": "province_conditions.json#/definitions/province_conditions"
            },
            "any_trade_node": {
              "$ref": "tradenode_conditions.json#/definitions/tradenode_conditions"
            },

            "capital_scope": {
              "todo": "check if actually dual scope?",
              "$ref": "province_conditions.json#/definitions/province_conditions"
            }
          }
        }
      ]
    },
    "anywhere_conditions_identifier_dual_scopes": {
      "$identifierProperties": {
        "map_provinces": {
          "$ref": "province_conditions.json#/definitions/province_conditions"
        },
        "country_tags": {
          "$ref": "country_conditions.json#/definitions/country_conditions"
        },
        "map_area": {
          "$mergeProps": [
            {"$ref": "province_conditions.json#/definitions/province_conditions"},
            {"properties": {"type": {"type": "string", "enum": ["all"]}}}
          ]
        },
        "map_region": {
          "$mergeProps": [
            {"$ref": "province_conditions.json#/definitions/province_conditions"},
            {"properties": {"type": {"type": "string", "enum": ["all"]}}}
          ]
        },
        "map_superregion": {
          "$mergeProps": [
            {"$ref": "province_conditions.json#/definitions/province_conditions"},
            {"properties": {"type": {"type": "string", "enum": ["all"]}}}
          ]
        },
        "map_provincegroups": {
          "$mergeProps": [
            {"$ref": "province_conditions.json#/definitions/province_conditions"},
            {"properties": {"type": {"type": "string", "enum": ["all"]}}}
          ]
        },
        "map_continent": {
          "$mergeProps": [
            {"$ref": "province_conditions.json#/definitions/province_conditions"},
            {"properties": {"type": {"type": "string", "enum": ["all"]}}}
          ]
        },
        "trade_companies": {
          "$mergeProps": [
            {"$ref": "province_conditions.json#/definitions/province_conditions"},
            {"properties": {"type": {"type": "string", "enum": ["all"]}}}
          ]
        },
        "colonial_regions": {
          "$mergeProps": [
            {"$ref": "province_conditions.json#/definitions/province_conditions"},
            {"properties": {"type": {"type": "string", "enum": ["all"]}}}
          ]
        }
      }
    },
    "anywhere_conditions_properties": {
      "type": "object",
      "properties": {
        "is_date": {
          "description": "If the current date is X or later.",
          "$ref": "special_values.json#/definitions/date"
        },
        "is_tutorial_active": {
          "description": "If the tutorial is active.",
          "$ref": "special_values.json#/definitions/boolean"
        },


        "allows_female_emperor": {
          "description": "Returns true if females can become emperor.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "always": {
          "description": "Returns true under all circumstances if set to yes, returns false under all circumstances if set to no.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "current_age": {
          "description": "Returns true, if the current age is X.",
          "$ref": "identifiers.json#/definitions/ages"
        },
        "empire_of_china_reform_level": {
          "description": "Returns true, if at least X Empire of China reforms are enacted. Works similar to [i]hre_reform_level[/i]",
          "type": "number"
        },
        "exists": {
          "description": "Returns true if country X exists.",
          "$ref": "special_values.json#/definitions/country_tag_or_scope"
        },
        "had_global_flag": {
          "description": "Returns true if the global flag X was last set at least Y days ago.",
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "flag": {"$ref": "identifiers.json#/definitions/global_flags"},
            "days": {"type": "number"}
          },
          "required": ["flag", "days"]
        },
        "has_changed_nation": {
          "description": "Returns true if playing as a released vassal.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "has_dlc": {
          "description": "Returns true if the DLC X is enabled.",
          "$ref": "identifiers.json#/definitions/dlcs"
        },
        "has_first_revolution_started": {
          "description": "Returns true if a revolution has happened in the world.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "has_game_started": {
          "description": "Returns true if the game has started.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "has_global_flag": {
          "description": "Returns true if the specified global flag is set.",
          "$ref": "identifiers.json#/definitions/global_flags"
        },
        "has_saved_event_target": {
          "description": "Returns true if the specified event target has been saved.",
          "$ref": "special_values.json#/definitions/event_target_name"
        },
        "has_switched_nation": {
          "description": "Returns true if the player has changed nation by playing as a released vassal.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "hre_heretic_religion": {
          "description": "Returns true if the specified religion is the opposition religion of the HRE.\r\nNote: No localisation for the negation.",
          "anyOf": [
            {
              "$ref": "identifiers.json#/definitions/religions"
            },
            {
              "$ref": "special_values.json#/definitions/country_scope"
            }
          ]
        },
        "hre_leagues_enabled": {
          "description": "Returns true religious leagues are enabled.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "hre_reform_level": {
          "description": "Returns true if the Xth imperial reform is enacted.",
          "type": "number"
        },
        "hre_religion": {
          "description": "Returns true if the specified religion is the dominant faith of the HRE.",
          "anyOf": [
            {
              "$ref": "identifiers.json#/definitions/religions"
            },
            {
              "$ref": "special_values.json#/definitions/country_scope"
            }
          ]
        },
        "hre_religion_locked": {
          "description": "Returns true if an official faith of the HRE has been permanently established.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "hre_religion_treaty": {
          "description": "Returns true if the treaty of religious peace in the HRE has been signed.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "hre_size": {
          "description": "Returns true if the HRE contains at least X members.",
          "type": "number"
        },
        "imperial_influence": {
          "description": "Returns true if the emperor of the HRE has an imperial authority of at least X.",
          "type": "number"
        },
        "imperial_mandate": {
          "description": "Returns true, if the emperor of China has at least X mandate.",
          "type": "number"
        },
        "ironman": {
          "description": "Returns true if the ironman mode is enabled",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "is_imperial_ban_allowed": {
          "description": "Returns true if the emperor has a casus belli on occupiers of the Empire.\r\nNote: Enabled/Disabled with Call for Reichsreform.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "is_institution_enabled": {
          "description": "Returns true if the specified institution has been discovered.",
          "$ref": "identifiers.json#/definitions/institutions"
        },
        "is_month": {
          "description": "Returns true if the current month is at least X (zero based).",
          "type": "number"
        },
        "is_random_new_world": {
          "description": "Returns true if playing with a random New World.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "is_reformation_center": {
          "description": "Returns true if the province is a reformation center.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "is_religion_enabled": {
          "description": "Returns true if the specified religion is enabled.",
          "$ref": "identifiers.json#/definitions/religions"
        },
        "is_year": {
          "description": "Returns true if the current year is at least X.",
          "type": "number"
        },
        "normal_or_historical_nations": {
          "description": "Returns true if game is set to use normal or historical nations.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "normal_province_values": {
          "description": "Returns true if game is set to use normal province values.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "num_of_electors": {
          "description": "Returns true if there are at least X electors of the HRE.",
          "type": "number"
        },
        "papacy_active": {
          "description": "Returns true if the papacy is active.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "real_day_of_year": {
          "description": "Returns true, if today is X. Refers to the actual real day (probably takes system time).",
          "type": "number"
        },
        "real_month_of_year": {
          "description": "Returns true if the month of the year in reality is at least X (January â‰™ 0)",
          "type": "number"
        },
        "reform_desire": {
          "description": "Returns true if the reform desire is at least X%.",
          "type": "number"
        },
        "religion_years": {
          "description": "Returns true if the specified religion is enabled for at least X years.",
          "type": "object",
          "$identifierProperties": {
            "religions": {
              "type": "number"
            }
          }
        },
        "revolution_target_exists": {
          "description": "Returns true if there is a revolutionary target in the world.",
          "$ref": "special_values.json#/definitions/boolean"
        },
        "start_date": {
          "description": "Returns true if the start date of the campaign is X.",
          "$ref": "special_values.json#/definitions/date"
        },
        "started_in": {
          "description": "Returns true if the start date of the campaign is X or after.",
          "$ref": "special_values.json#/definitions/date"
        },
        "total_number_of_cardinals": {
          "description": "Returns true if the total number of cardinals is at least X.",
          "type": "number"
        }
      }
    },
    "anywhere_conditions_variables": {
      "properties": {
        "check_variable": {
          "$ref": "special_values.json#/definitions/variable_operation"
        },
        "is_variable_equal": {
          "$ref": "special_values.json#/definitions/variable_assign_variable"
        }
      }
    },
    "anywhere_conditions_event_targets": {
      "patternProperties": {
        "^event_target:.*$": {
          "todo": "Somehow determine which type of scope this is...",
          "$mergeProps": [
            {"$ref": "country_conditions.json#/definitions/country_conditions"},
            {"$ref": "province_conditions.json#/definitions/province_conditions"}
          ]
        }
      }
    }
  }
}

